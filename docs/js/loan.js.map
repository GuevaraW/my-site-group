{"version":3,"sources":["webpack://my-site-group/./src/js/loan.js"],"names":["loanFormHTML","document","getElementById","loanForm","forms","loanResult","paymentHTML","querySelector","totalHTML","minHTML","maxHTML","loanErrorHTML","moneyFormat","Intl","NumberFormat","style","currency","amount","addEventListener","e","numberKey","otherKey","test","key","preventDefault","parseFloat","value","getLoanType","loanType","max","min","rate","months","parseInt","month","payment","calculate","showLoan","showLoanError","type","personal","car","creditLine","total","interest","i","Math","ceil","textContent","format","classList","contains","add","remove"],"mappings":"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","file":"js/loan.js","sourcesContent":["//Elements\r\nconst loanFormHTML = document.getElementById('loan-form');\r\nconst loanForm = document.forms['loanForm'];\r\nconst loanResult = document.getElementById('loanResult');\r\nconst paymentHTML = document.querySelector('span.payment');\r\nconst totalHTML = document.querySelector('span.total');\r\nconst minHTML = document.querySelector('span.min');\r\nconst maxHTML = document.querySelector('span.max');\r\nconst loanErrorHTML = document.getElementById('loanError');\r\nconst moneyFormat = new Intl.NumberFormat('en-US', { style: 'currency', currency: 'USD' });\r\n\r\n/************************** Listeners ***************************/\r\n\r\n// Input number\r\nloanForm.amount.addEventListener('keydown', (e) => {\r\n\tconst numberKey = /\\d+/;\r\n\tconst otherKey = /(back)/i;\r\n\tif (!(numberKey.test(e.key) || otherKey.test(e.key))) {\r\n\t\te.preventDefault();\r\n\t}\r\n});\r\n\r\nloanFormHTML.addEventListener('submit', (e) => {\r\n\te.preventDefault();\r\n\tlet amount = parseFloat(loanForm.amount.value);\r\n\tlet { max, min, rate } = getLoanType(loanForm.loanType.value);\r\n\tlet months = parseInt(loanForm.month.value);\r\n\r\n\tif (amount <= max && amount >= min) {\r\n\t\tlet payment = calculate(amount, months, rate);\r\n\t\tshowLoan(payment, amount);\r\n\t} else {\r\n\t\tshowLoanError(min, max);\r\n\t}\r\n});\r\n\r\nfunction getLoanType(type) {\r\n\tlet loanType = {};\r\n\tloanType.personal = {\r\n\t\tmax: 100000,\r\n\t\tmin: 10000,\r\n\t\trate: 2.45,\r\n\t};\r\n\tloanType.car = {\r\n\t\tmax: 500000,\r\n\t\tmin: 10000,\r\n\t\trate: 3.12,\r\n\t};\r\n\tloanType.creditLine = {\r\n\t\tmax: 1000000,\r\n\t\tmin: 10000,\r\n\t\trate: 3.9,\r\n\t};\r\n\treturn loanType[type];\r\n}\r\n\r\nconst calculate = (amount, months, rate) => {\r\n\tlet total = amount,\r\n\t\tpayment,\r\n\t\tinterest = 0;\r\n\r\n\tpayment = amount / months;\r\n\r\n\tfor (let i = 0; i <= months; i++) {\r\n\t\tamount = payment * i;\r\n\t\tinterest += (amount * rate) / 12 / 100;\r\n\t}\r\n\r\n\ttotal = Math.ceil(total + interest);\r\n\tpayment = Math.ceil(total / months);\r\n\r\n\treturn payment;\r\n};\r\n\r\nconst showLoan = (payment, amount) => {\r\n\tpaymentHTML.textContent = moneyFormat.format(payment);\r\n\ttotalHTML.textContent = moneyFormat.format(amount);\r\n\tif (!loanErrorHTML.classList.contains('hidden')) {\r\n\t\tloanErrorHTML.classList.add('hidden');\r\n\t}\r\n};\r\n\r\nconst showLoanError = (min, max) => {\r\n\tif (loanErrorHTML.classList.contains('hidden')) {\r\n\t\tloanErrorHTML.classList.remove('hidden');\r\n\t}\r\n\tminHTML.textContent = moneyFormat.format(min);\r\n\tmaxHTML.textContent = moneyFormat.format(max);\r\n\tpaymentHTML.textContent = '$0';\r\n\ttotalHTML.textContent = '$0';\r\n};\r\n"],"sourceRoot":""}